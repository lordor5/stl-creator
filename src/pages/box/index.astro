---
import Layout from "../../layouts/Layout.astro";
import Viwer from "../../components/Viwer.astro";

interface Cordenates {
  x: number;
  y: number;
  n: number;
}

const numColumns = 12; // Number of columns
const numRows = 18; // Number of rows

let n = 0;
let walls: Array<Array<Cordenates>> = [];
for (let i = 0; i < numRows; i++) {
  walls.push([]);
  for (let j = 0; j < numColumns; j++) {
    walls[i][j] = {
      x: (j%2) !== 0 ? 1 : 0,
      y: (i%2) !== 0 ? 1 : 0,
      n: n,
    };
    n++;
  }
}
---

<Layout title="Welcome to Astro.">
  <main>
    <form
    method="POST"
    enctype="multipart/form-data"
    id="walls"
  >
  <div class="grid"
  style=`grid-template-rows: repeat(${numRows *2}, 1.5rem); grid-template-columns: repeat(${numColumns*2},  1.5rem);`>
    {
      walls.map((row) => (
        <>
          {row.map((column) => (
            <>
              <div class="estrechoX" />
              <input type="checkbox" 
              checked={column.x === 1}
              name=`${column.n}x`
              class="estrechoX"
              />
            </>
          ))}
          {row.map((column, j) => (
            <>
              <input
                type="checkbox"
                checked={column.y === 1}
                name=`${column.n}y`
                class="estrechoY"
              />
              <div style="background-color: black;"/>
            </>
          ))}
        </>
      ))
    }
    </div>
    <button>Submit</button>
  </form>

  <div class="viwer">
    <Viwer />    
  </div>
  </main>
</Layout>
<style>
  main {
    display: flex;
  }
  main .viwer,
  main form {
    margin: 2rem;
  }
  .grid {
    display: grid;
    width: fit-content;
  }
  .estrechoY {
    height: 1.5rem;
    margin: 0;
  }
  .estrechoX {
    width: 1.5rem;
    margin: 0;
  }

  /* Styles when the checkbox is checked */
  .grid input:checked {
    background-color: lightgreen;
  }
        /* Checkmark */
  .grid input {
    background-color: lightgreen;
  }
  /* Styles when the checkbox is not checked */
  .grid input:not(:checked) {
    background-color: lightcoral;
  }
</style>
